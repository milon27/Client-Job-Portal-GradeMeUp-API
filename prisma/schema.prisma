datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

//utils

enum Gender {
  MALE
  FEMALE
}

enum JOB_TYPE {
  FULL_TIME
  PART_TIME
  INTERNSHIP
}

// all models
model Admin {
  id         Int      @id @default(autoincrement())
  name       String   @db.VarChar(100)
  email      String   @unique @db.VarChar(155)
  password   String
  created_at DateTime @default(now())

  @@map("admin")
}

model Candidate {
  id        Int        @id @default(autoincrement())
  name      String     @db.VarChar(50)
  email     String     @unique @db.VarChar(50)
  password  String
  // image_url    String
  gender    Gender     @default(MALE)
  // dob          DateTime
  // country      String
  // region       String
  // full_address String
  // zip_code  String     @db.VarChar(20)
  
  languages Language[] @relation("candidate_language")

  //professional info
  job_type          JOB_TYPE       @default(FULL_TIME)
  //one candidate has one job profession
  job_profession    JobProfession? @relation(fields: [job_profession_id], references: [id])
  job_profession_id Int?

  //others
  private    Boolean  @default(false)
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  @@map("candidate")
}

// other models

model JobCategory {
  id          Int             @id @default(autoincrement())
  title       String
  professions JobProfession[]

  @@map("job_category")
}

model JobProfession {
  id    Int    @id @default(autoincrement())
  title String

  job_category JobCategory @relation(fields: [job_cat_id], references: [id])
  job_cat_id   Int

  candidates Candidate[]

  @@map("job_profession")
}

model Language {
  id         Int         @id @default(autoincrement())
  title      String
  candidates Candidate[] @relation("candidate_language")

  @@map("language")
}
